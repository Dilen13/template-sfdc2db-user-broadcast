<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<mule-configuration xmlns="http://www.mulesoft.com/tooling/messageflow" name="test-flows.">
    <flow SubFlow="true" name="insertUserSalesforceSubFlow" type="http://www.mulesoft.org/schema/mule/core/subflow" entity-id="3713e805-8213-4db4-99e3-80d6f2a87c94">
        <properties>
            <property name="initialState"/>
            <property name="processingStrategy2"/>
            <property name="processingStrategy"/>
            <property name="bussinessEventsLabel"/>
            <property name="tracking:enable-default-events"/>
            <property name="auxiliary;index" value="1"/>
        </properties>
        <lane hadOnlyOneElement="false" index="0" isChoiceOtherwiseLane="false" entity-id="compartment-lane#1">
            <graphicalData x="0" y="0" width="0" height="0"/>
            <pattern name="Insert User in SalesforceA" type="http://www.mulesoft.org/schema/mule/sfdc/sfdc-connector" entity-id="Salesforce#1">
                <graphicalData x="0" y="0" width="0" height="0"/>
                <properties>
                    <property name="proxyUsername"/>
                    <property name="securityToken"/>
                    <property name="proxyHost"/>
                    <property name="org.mule.tooling.ui.modules.core.widgets.meta.ModeAttribute" value="http://www.mulesoft.org/schema/mule/sfdc/upsert"/>
                    <property name="proxyPort"/>
                    <property name="type" value="User"/>
                    <property name="password"/>
                    <property name="url"/>
                    <property name="externalIdFieldName" value="Email"/>
                    <property name="username"/>
                    <property name="sessionId"/>
                    <property name="serviceEndpoint"/>
                    <property name="accessTokenId"/>
                    <property name="config-ref" value="SalesforceA"/>
                    <property name="auxiliary;index" value="2"/>
                    <property name="proxyPassword"/>
                    <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/upsert-objectss;0">
                        <property name="auxiliary;index" value="3"/>
                        <property name="auxiliary;wrapIn" value="3"/>
                        <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/upsert-objects;1">
                            <property name="auxiliary;index" value="4"/>
                            <property name="auxiliary;wrapIn" value="4"/>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;1">
<property name="value" value="#[payload.LocaleSidKey]"/>
<property name="key" value="LocaleSidKey"/>
<property name="auxiliary;index" value="5"/>
<property name="auxiliary;wrapIn" value="5"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;2">
<property name="value" value="#[payload.LastName]"/>
<property name="key" value="LastName"/>
<property name="auxiliary;index" value="6"/>
<property name="auxiliary;wrapIn" value="6"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;3">
<property name="value" value="#[payload.LanguageLocaleKey]"/>
<property name="key" value="LanguageLocaleKey"/>
<property name="auxiliary;index" value="7"/>
<property name="auxiliary;wrapIn" value="7"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;4">
<property name="value" value="#[payload.Email]"/>
<property name="key" value="Email"/>
<property name="auxiliary;index" value="8"/>
<property name="auxiliary;wrapIn" value="8"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;5">
<property name="value" value="#[payload.FirstName]"/>
<property name="key" value="FirstName"/>
<property name="auxiliary;index" value="9"/>
<property name="auxiliary;wrapIn" value="9"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;6">
<property name="value" value="#[payload.TimeZoneSidKey]"/>
<property name="key" value="TimeZoneSidKey"/>
<property name="auxiliary;index" value="10"/>
<property name="auxiliary;wrapIn" value="10"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;7">
<property name="value" value="#[payload.CommunityNickname]"/>
<property name="key" value="CommunityNickname"/>
<property name="auxiliary;index" value="11"/>
<property name="auxiliary;wrapIn" value="11"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;8">
<property name="value" value="#[payload.ProfileId]"/>
<property name="key" value="ProfileId"/>
<property name="auxiliary;index" value="12"/>
<property name="auxiliary;wrapIn" value="12"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;9">
<property name="value" value="#[payload.EmailEncodingKey]"/>
<property name="key" value="EmailEncodingKey"/>
<property name="auxiliary;index" value="13"/>
<property name="auxiliary;wrapIn" value="13"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;10">
<property name="value" value="#[payload.Alias]"/>
<property name="key" value="Alias"/>
<property name="auxiliary;index" value="14"/>
<property name="auxiliary;wrapIn" value="14"/>
                            </property-collection>
                            <property-collection name="@http://www.mulesoft.org/schema/mule/sfdc/inner-upsert-objects;11">
<property name="value" value="#[payload.Email]"/>
<property name="key" value="Username"/>
<property name="auxiliary;index" value="15"/>
<property name="auxiliary;wrapIn" value="15"/>
                            </property-collection>
                        </property-collection>
                    </property-collection>
                </properties>
            </pattern>
        </lane>
    </flow>
    <flow SubFlow="true" name="deleteUserDB" type="http://www.mulesoft.org/schema/mule/core/subflow" entity-id="055f41f8-d71d-4480-918a-7a45cb90df68">
        <properties>
            <property name="initialState"/>
            <property name="processingStrategy2"/>
            <property name="processingStrategy"/>
            <property name="bussinessEventsLabel"/>
            <property name="tracking:enable-default-events"/>
            <property name="auxiliary;index" value="16"/>
        </properties>
        <lane hadOnlyOneElement="false" index="0" isChoiceOtherwiseLane="false" entity-id="compartment-lane#2">
            <graphicalData x="0" y="0" width="0" height="0"/>
            <pattern name="delete User from db" type="http://www.mulesoft.org/schema/mule/db/database-connector" entity-id="Database#1">
                <graphicalData x="0" y="0" width="0" height="0"/>
                <properties>
                    <property name=""/>
                    <property name="source"/>
                    <property name="transactionalAction"/>
                    <property name="target"/>
                    <property name="org.mule.tooling.ui.modules.core.widgets.meta.ModeAttribute" value="http://www.mulesoft.org/schema/mule/db/delete"/>
                    <property name="config-ref" value="GenericDatabaseConnectorMySql"/>
                    <property name="auxiliary;index" value="17"/>
                    <property name="bulkMode"/>
                    <property-collection name="@http://www.mulesoft.org/schema/mule/db/dynamic-query;0">
                        <property name="text" value="delete from sf_user where email = '#[payload.email]'"/>
                        <property name="auxiliary;index" value="18"/>
                        <property name="auxiliary;wrapIn" value="18"/>
                    </property-collection>
                </properties>
            </pattern>
        </lane>
    </flow>
    <flow SubFlow="true" name="selectUserFromDB" type="http://www.mulesoft.org/schema/mule/core/subflow" entity-id="75c150c7-275d-4a2e-81ab-f00f9405f4e5">
        <properties>
            <property name="initialState"/>
            <property name="processingStrategy2"/>
            <property name="processingStrategy"/>
            <property name="bussinessEventsLabel"/>
            <property name="tracking:enable-default-events"/>
            <property name="auxiliary;index" value="19"/>
        </properties>
        <lane hadOnlyOneElement="false" index="0" isChoiceOtherwiseLane="false" entity-id="compartment-lane#3">
            <graphicalData x="0" y="0" width="0" height="0"/>
            <pattern name="query User from db" type="http://www.mulesoft.org/schema/mule/db/database-connector" entity-id="Database#2">
                <graphicalData x="0" y="0" width="0" height="0"/>
                <properties>
                    <property name="streaming"/>
                    <property name=""/>
                    <property name="fetchSize"/>
                    <property name="source"/>
                    <property name="transactionalAction"/>
                    <property name="target"/>
                    <property name="maxRows"/>
                    <property name="org.mule.tooling.ui.modules.core.widgets.meta.ModeAttribute" value="http://www.mulesoft.org/schema/mule/db/select"/>
                    <property name="config-ref" value="GenericDatabaseConnectorMySql"/>
                    <property name="auxiliary;index" value="20"/>
                    <property-collection name="@http://www.mulesoft.org/schema/mule/db/parameterized-query;0">
                        <property name="text" value="select firstname, lastname, id, email, salesforce_id from mulesoft.sf_user where email = #[payload['Email']]"/>
                        <property name="auxiliary;index" value="21"/>
                        <property name="auxiliary;wrapIn" value="21"/>
                    </property-collection>
                </properties>
            </pattern>
        </lane>
    </flow>
    <description></description>
</mule-configuration>
